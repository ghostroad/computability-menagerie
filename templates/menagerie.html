<?xml version="1.0" encoding="utf-8"?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>The Computability Menagerie</title>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}"/>
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" />
  <script type="text/javascript" src="{{ url_for('static', filename='jquery-1.4.4.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='hovertip.js') }}"></script>
  <script type="text/javascript">
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    $CARDINALITY_CATEGORY = {{ cardinalityAndCategory|tojson|safe }};
  </script>
  <script type="text/javascript" src="{{ url_for('static', filename='menagerie.js') }}"></script>
</head>

{% macro svgbox(className) -%}
  <svg height="10pt" viewBox="0.00 0.00 16.00 10.00" width="16pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="{{ className }}"><rect x="0" y="0" width="16" height="10" stroke="black"/></g></svg>
{%- endmacro %}

{% macro svgellipse(className) -%}
  <svg height="20pt" viewBox="0.00 0.00 62.00 32.00" width="40pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="{{ className }}"><ellipse cx="30" cy="15" rx="30" ry="15"/></g></svg>
{%- endmacro %}

<body>
  <div id="controls">
    <table>
      <tr>
	<td><div id="numSelected">0</div></td>
	<td>selected</td>
	<td><input type="button" id="showImplications" onclick="showImplications();" value="Show implications"/></td>
	<td id="showClassDetails" style="display:none"><input type="button" onclick="showClassDetailsClicked();" value="Show class details"/></td>
	<td><input type="button" id="viewSubgraph" onclick="viewSubgraph();" value="View subgraph"/></td>
	<td><input type="button" id="unselectAll" onclick="unselectAll();" value="Unselect all"/></td>
	<td>&nbsp;</td>
	<td><a class="notALink" id="toggleHelp"><span>Show/hide help</span></a></td>
	<td>&nbsp;</td>
	<td><a class="notALink" id="toggleKey"><span>Show/hide key</span></a></td>
      </tr>
    </table>
  </div>
  <div id="help" style="display: none;">
  <hr/>
    <ul>
      <li>Select/unselect classes by clicking on them. Selected classes are shown in {{ svgbox("selected") }}.</li>
      <li>Double-click on a class to see its properties in detail (opens a new tab). Alternatively, hover over the class to see a short summary.</li>
      <li>When a single class is selected, the graph is recolored to indicate how other classes relate to the selected class.</li>
      <li>Select a pair of classes, then click "Show implications" to see the implications between them (opens a new tab/window).</li>
      <li>Select a group of classes, then click "View subgraph" to generate a subgraph consisting only of the selected classes.</li>
      <li>Bookmark the page to save your settings.</li>
    </ul>
  <hr/>
  </div>

  <div id="key" style="display: none;">
    <hr/>
    <div id="singleClassRecoloringKey">
	<table>
	  <tr><td>{{ svgellipse("properlyAbove") }}</td><td>Known to be a proper superclass of the selected class.</td></tr>
	  <tr><td>{{ svgellipse("above") }}</td><td>Known to be a superclass of the selected class. Other inclusion unknown.</td></tr>
	  <tr><td>{{ svgellipse("properlyBelow") }}</td><td>Known to be a proper subclass of the selected class.</td></tr>
	  <tr><td>{{ svgellipse("below") }}</td><td>Known to be a subclass of the selected class. Other inclusion unknown.</td></tr>
	  <tr><td>{{ svgellipse("incomparable") }}</td><td>Known to be incomparable to the selected class.</td></tr>
	  <tr><td>{{ svgellipse("other") }}</td><td>Everything else.</td></tr>
	</table>
    </div>
    <hr/>
  </div>


  <div id="graph">
  {{ graph | safe }}
  </div>
  {% for cls in classes %}
    <div target="{{ cls.name }}" class="hovertip">
       <table>
	 <tr><td>{% if cls.cardinality.known() %} {{cls.cardinality.prettyPropertyValue()}} {% else %} cardinality unknown {% endif %}</td></tr>
	 <tr><td>{% if cls.category.known() %} {{cls.category.prettyPropertyValue()}} {% else %} category unknown {% endif %}</td></tr>
	 <tr><td>measure {% if cls.measure.known() %} {{ cls.measure.propertyValue }} {% else %} unknown {% endif %}</td></tr>
	 <tr><td>hdim {% if cls.hdim.known() %} {{ cls.hdim.propertyValue }} {% else %} unknown {% endif %}</td></tr>
	 <tr><td>pdim {% if cls.pdim.known() %} {{ cls.pdim.propertyValue }} {% else %} unknown {% endif %}</td></tr>
	 <tr><td><a class="notALink" onclick="window.open('{{ url_for('showClassDetails', className=cls.name) }}');"><span> Details</span> </a></td></tr>
       </table>
    </div>
  {% endfor %}

  <svg height="0pt" width="0pt" id="paintServers" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g>
      <defs>
	<pattern id="abovePattern" x="0" y="0" width="20" height="80" patternUnits="userSpaceOnUse">
	  <g class="properlyAbove">
	    <rect x="0" y="0" width="10" height="80"/>
	  </g>
	  <g class="selected">
	    <rect x="10" y="0" width="10" height="80"/>
	  </g>
	</pattern>
	<pattern id="belowPattern" x="0" y="0" width="20" height="80" patternUnits="userSpaceOnUse">
	  <g class="properlyBelow">
	    <rect x="0" y="0" width="10" height="80"/>
	  </g>
	  <g class="selected">
	    <rect x="10" y="0" width="10" height="80"/>
	  </g>
	</pattern>
	<pattern id="uncountableUnknownPattern" x="0" y="0" width="20" height="80" patternUnits="userSpaceOnUse">
	  <g class="uncountableMeager">
	    <rect x="0" y="0" width="10" height="80"/>
	  </g>
	  <g class="uncountableComeager">
	    <rect x="10" y="0" width="10" height="80"/>
	  </g>
	</pattern>
	<pattern id="unknownMeagerPattern" x="0" y="0" width="20" height="80" patternUnits="userSpaceOnUse">
	  <g class="countable">
	    <rect x="0" y="0" width="10" height="80"/>
	  </g>
	  <g class="uncountableMeager">
	    <rect x="10" y="0" width="10" height="80"/>
	  </g>
	</pattern>
	<pattern id="unknownUnknownPattern" x="0" y="0" width="20" height="80" patternUnits="userSpaceOnUse">
	  <g class="uncountableComeager">
	    <rect x="0" y="0" width="10" height="80"/>
	  </g>
	  <g class="countable">
	    <rect x="10" y="0" width="10" height="80"/>
	  </g>
	</pattern>
      </defs>
    </g>
    </svg>

</body>
</html>
